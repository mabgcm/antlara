<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Antlara Dental – Oferta de Tratamiento Personalizado</title>
  <style>
    @media print {
      .no-print { display: none !important; }
      a { text-decoration: none; color: #000; }
      .page { page-break-inside: avoid; }
      body { color: #000; }
    }
  </style>
</head>
<body style="margin:0; background-color:#F9FAFB; color:#111827; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji','Segoe UI Emoji'; line-height:1.5;">

  <!-- Offer Data (JSON) -->
  <script type="application/json" id="offer-data">
  {
  "patient_name": "Carlos Evelio Montoya Herrera",
  "date_prepared": "2025-09-27",
  "currency": "USD",
  "treatment_focus": "Implantes dentales Straumann y coronas de zirconio para arcadas superior e inferior",
  "visits": [
    {
      "title": "1ª Visita",
      "hotel_nights": "5 noches",
      "bullets": [
        "6 implantes Straumann® Group Neodent - Todo en 6 para la arcada superior",
        "2 implantes Straumann® Group Neodent - No. 34 y 36",
        "1 implante Straumann® Group Medentika - No. 46",
        "Elevación de seno x1 - Por confirmar",
        "Injerto óseo x1 - Por confirmar",
        "Membrana x1 - Por confirmar",
        "Prótesis temporal por arcada x1 - Arcada superior"
      ],
      "item_label": "Pago 1ª Visita",
      "item_desc": "Tratamiento inicial con implantes y prótesis temporal",
      "amount": 4613.4
    },
    {
      "title": "2ª Visita",
      "hotel_nights": "5 noches",
      "bullets": [
        "12 coronas de zirconio para la arcada superior",
        "13 coronas de zirconio para la arcada inferior"
      ],
      "item_label": "Pago 2ª Visita",
      "item_desc": "Colocación de coronas de zirconio para ambas arcadas",
      "amount": 5377.5
    }
  ],
  "visit1_pay_amount": "4,613.40",
  "visit2_pay_amount": "5,377.50",
  "includes": [
    "Protector bucal",
    "Tomografía",
    "Inyecciones",
    "Radiografía",
    "Todos los traslados (hotel-clínica-hotel)",
    "Traslado VIP (aeropuerto-hotel-aeropuerto)"
  ]
}

  </script>

  <!-- Top Bar / Actions -->
  <div class="no-print" style="position:sticky; top:0; z-index:10; background:#FFFFFF; border-bottom:1px solid #E5E7EB;">
    <div style="max-width:64rem; margin:0 auto; padding:12px 16px; display:flex; align-items:center; justify-content:space-between;">
      <img id="clinic-logo" src="https://www.antlaradental.com/assets/img/logos/header-logo.png" alt="Logo de Antlara Dental" style="height:32px; width:auto;" />
      <div style="display:flex; gap:8px;">
        <button onclick="window.print()" style="padding:8px 12px; border-radius:10px; border:1px solid #E5E7EB; background:#FFFFFF; font-size:14px; cursor:pointer;">Imprimir / Guardar como PDF</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header style="background:#FFFFFF;">
    <div style="max-width:64rem; margin:0 auto; padding:40px 24px;">
      <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; gap:24px; text-align:center;">
        <div>
          <h1 style="margin:0; font-size:24px; font-weight:700;">Clínica Dental Antlara</h1>
          <p style="margin:4px 0 0; color:#4B5563;">Oferta de Tratamiento Personalizado</p>
          <p style="margin:8px 0 0; font-size:14px;">Preparado para: <span style="font-weight:600;" data-field="patient_name"></span></p>
          <p style="margin:0; font-size:14px;">Fecha: <span style="font-weight:600;" data-field="date_prepared_fmt"></span></p>
        </div>
      </div>
      <div style="margin-top:24px; font-size:14px; color:#4B5563; line-height:1.7;">
        <p style="margin:0;">Gracias por su interés en la atención dental con Antlara Dental. A continuación encontrará un resumen claro de su plan recomendado, precios, lo que está incluido y los próximos pasos.</p>
      </div>
    </div>
  </header>

  <!-- Hero Highlights -->
  <section style="background:#F3F4F6;">
    <div style="max-width:64rem; margin:0 auto; padding:32px 24px; display:grid; grid-template-columns:1fr; gap:16px;">
      <!-- card 1 -->
      <div class="page" style="background:#FFFFFF; border:1px solid #E5E7EB; border-radius:16px; padding:20px;">
        <h3 style="margin:0; font-weight:600;">Enfoque del Tratamiento</h3>
        <p style="margin:6px 0 0; font-size:14px; color:#374151;"><span data-field="treatment_focus"></span></p>
      </div>
      <!-- card 2 -->
      <div class="page" style="background:#FFFFFF; border:1px solid #E5E7EB; border-radius:16px; padding:20px;">
        <h3 style="margin:0; font-weight:600;">Viaje y Estancia</h3>
        <p style="margin:6px 0 0; font-size:14px; color:#374151;"><span data-field="hotel_nights_total"></span> noches de hotel incluidas, traslados a la clínica (aeropuerto-hotel-clínica).</p>
      </div>
      <!-- card 3 -->
      <div class="page" style="background:#FFFFFF; border:1px solid #E5E7EB; border-radius:16px; padding:20px;">
        <h3 style="margin:0; font-weight:600;">Transparencia Total</h3>
        <p style="margin:6px 0 0; font-size:14px; color:#374151;">Todas las tomografías, inyecciones y radiografías estándar incluidas. Sin costos sorpresa.</p>
      </div>
    </div>
  </section>

  <!-- Treatment Plan -->
  <section id="plan" style="background:#FFFFFF;">
    <div class="page" style="max-width:64rem; margin:0 auto; padding:40px 24px;">
      <h2 style="margin:0; font-size:20px; font-weight:700;">1) Plan de Tratamiento Propuesto</h2>
      <div id="visits-grid" style="margin-top:16px; display:grid; grid-template-columns:1fr; gap:24px;">
        <!-- Visits injected here -->
      </div>
      <p style="margin-top:16px; font-size:14px; color:#4B5563;">Nota: Los plazos dependen de la cicatrización y de los hallazgos clínicos. El plan anterior es un modelo: reemplácelo con los elementos exactos de la oferta.</p>
    </div>
  </section>

  <!-- Pricing -->
  <section id="pricing" style="background:#F9FAFB;">
    <div class="page" style="max-width:64rem; margin:0 auto; padding:40px 24px;">
      <h2 style="margin:0; font-size:20px; font-weight:700;">2) Precios y Calendario de Pagos</h2>

      <div style="margin-top:16px; overflow-x:auto; border:1px solid #E5E7EB; border-radius:16px; background:#FFFFFF;">
        <table style="width:100%; border-collapse:collapse; font-size:14px;">
          <thead>
            <tr style="background:#F3F4F6; color:#374151;">
              <th style="text-align:left; padding:12px; border-bottom:1px solid #E5E7EB;">Artículo</th>
              <th style="text-align:left; padding:12px; border-bottom:1px solid #E5E7EB;">Detalles</th>
              <th style="text-align:right; padding:12px; border-bottom:1px solid #E5E7EB;">Monto (<span data-field="currency"></span>)</th>
            </tr>
          </thead>
          <tbody id="pricing-rows">
            <!-- Rows injected -->
          </tbody>
          <tfoot>
            <tr style="background:#F9FAFB;">
              <td style="padding:12px; font-weight:600;">Total</td>
              <td style="padding:12px; color:#6B7280;">Todo incluido según lo indicado</td>
              <td id="total-amount" style="padding:12px; text-align:right; font-weight:700;"></td>
            </tr>
          </tfoot>
        </table>
      </div>

      <div style="margin-top:24px; display:grid; grid-template-columns:1fr; gap:24px;">
        <div style="border:1px solid #E5E7EB; border-radius:16px; background:#FFFFFF; padding:20px;">
          <h3 style="margin:0; font-weight:600;">Qué Está Incluido</h3>
          <ul id="includes-list" style="margin:8px 0 0 0; padding-left:20px; color:#374151;">
            <!-- includes injected -->
          </ul>
        </div>

        <!-- Optional Excludes (present to avoid script errors) -->
        <div style="border:1px solid #E5E7EB; border-radius:16px; background:#FFFFFF; padding:20px; display:none;">
          <h3 style="margin:0; font-weight:600;">Qué No Está Incluido</h3>
          <ul id="excludes-list" style="margin:8px 0 0 0; padding-left:20px; color:#374151;"></ul>
        </div>
      </div>

      <p style="margin-top:16px; font-size:12px; color:#6B7280;">*Los tipos de cambio pueden afectar los pagos que no sean en USD.</p>
    </div>
  </section>

  <!-- Travel & Logistics -->
  <section style="background:#F9FAFB;">
    <div class="page" style="max-width:64rem; margin:0 auto; padding:40px 24px;">
      <h2 style="margin:0; font-size:20px; font-weight:700;">3) Viaje y Logística</h2>
      <div style="margin-top:16px; display:grid; grid-template-columns:1fr; gap:24px;">
        <div style="border:1px solid #E5E7EB; border-radius:16px; background:#FFFFFF; padding:20px;">
          <h3 style="margin:0; font-weight:600;">Hotel</h3>
          <p style="margin:6px 0 0; font-size:14px; color:#374151;"><span data-field="hotel_nights_total"></span> noches de hotel incluidas según lo mencionado arriba. También podemos ayudar a extender su estancia si lo solicita.</p>
        </div>
        <div style="border:1px solid #E5E7EB; border-radius:16px; background:#FFFFFF; padding:20px;">
          <h3 style="margin:0; font-weight:600;">Traslados</h3>
          <p style="margin:6px 0 0; font-size:14px; color:#374151;">Traslados aeropuerto ⇄ hotel ⇄ clínica incluidos. Compartiremos los datos del conductor antes de su llegada.</p>
        </div>
      </div>
      <p style="margin-top:16px; font-size:14px; color:#4B5563;">Por favor, comparta los detalles de su vuelo una vez reservado para poder coordinar las recogidas.</p>
    </div>
  </section>

  <!-- (Optional) Media Sections to match script targets; hidden by default) -->
  <section style="display:none;">
    <div style="max-width:64rem; margin:0 auto; padding:24px;">
      <div id="gallery-grid" style="display:grid; grid-template-columns:repeat(3, 1fr); gap:12px;"></div>
      <ul id="media-links" style="margin-top:12px; padding-left:16px;"></ul>
      <iframe id="yt-embed" title="YouTube Embed" style="margin-top:12px; width:100%; height:360px; border:1px solid #E5E7EB; border-radius:12px;" allowfullscreen></iframe>
    </div>
  </section>

  <!-- Contact / CTA -->
  <footer style="background:#F3F4F6;">
    <div style="max-width:64rem; margin:0 auto; padding:40px 24px;">
      <div style="display:grid; grid-template-columns:1fr; gap:24px; align-items:center;">
        <div>
          <h2 style="margin:0; font-size:20px; font-weight:700;">¿Preguntas? Estamos aquí para ayudarle.</h2>
          <p style="margin:8px 0 0; font-size:14px; color:#374151;">Responda a este documento con cualquier cambio que necesite. Podemos fijar fechas, organizar traslados y confirmar los detalles del hotel de inmediato.</p>
          <div style="margin-top:16px; font-size:14px;">
            <p style="margin:0; font-weight:600;">Clínica Dental Antlara</p>
            <p style="margin:4px 0 0;">Teléfono en Norteamérica: <a href="tel:+1437219644" style="text-decoration:underline; color:#111827;">(437) 219-644</a></p>
            <p style="margin:0;">Correo: <a href="mailto:antlara@antlaradental.com" style="text-decoration:underline; color:#111827;">antlara@antlaradental.com</a></p>
          </div>
        </div>
        <div style="display:flex; gap:12px; justify-content:flex-start;">
          <a class="no-print" href="https://wa.me/1437219644" target="_blank" rel="noopener" style="display:inline-block; padding:12px 16px; border-radius:12px; background:#059669; color:#FFFFFF; font-size:14px; text-decoration:none;">Chatear en WhatsApp</a>
          <button onclick="window.print()" class="no-print" style="padding:12px 16px; border-radius:12px; border:1px solid #E5E7EB; background:#FFFFFF; font-size:14px; cursor:pointer;">Imprimir / Guardar como PDF</button>
        </div>
      </div>
      <p style="margin-top:24px; font-size:12px; color:#6B7280;">© Clínica Dental Antlara. Esta es una plantilla: reemplace las imágenes/textos de ejemplo mediante el JSON superior.</p>
    </div>
  </footer>

  <!-- ######################## -->
  <!-- RENDER SCRIPT (no deps) -->
  <!-- ######################## -->
  <script>
    (function () {
      const raw = document.getElementById('offer-data').textContent.trim();
      /** @type {{
        patient_name:string,date_prepared:string,currency:string,treatment_focus:string,
        hotel_nights_total:number, visits:Array<{title:string,hotel_nights:number,bullets:string[],item_label:string,item_desc:string,amount:number}>,
        deposit_amount:number, visit1_pay_amount:number, visit2_pay_amount:number,
        price_valid_until:string, includes:string[], excludes:string[],
        media:{logo:string,beforeAfter:string,gallery:string[],youtube_embed:string,links:Array<{label:string,href:string}>}
      }} */
      const data = JSON.parse(raw);

      const fmtDate = (iso) => {
        try {
          const d = new Date(iso + (iso.length === 10 ? 'T00:00:00' : ''));
          const formatter = new Intl.DateTimeFormat(undefined, { day:'2-digit', month:'long', year:'numeric' });
          return formatter.format(d);
        } catch { return iso; }
      };

      const fmtMoney = (n) => {
        const cur = data.currency || 'USD';
        try {
          return new Intl.NumberFormat(undefined, { style:'currency', currency:cur, minimumFractionDigits:2 }).format(+n || 0);
        } catch {
          return (cur + ' ' + ((+n || 0).toFixed(2)));
        }
      };

      // Simple field binder using [data-field]
      const setText = (field, value) => {
        document.querySelectorAll('[data-field="' + field + '"]').forEach(el => el.textContent = value ?? '');
      };
      const setImgSrc = (field, src) => {
        const el = document.querySelector('[data-field="' + field + '"]');
        if (el && src) el.src = src;
      };

      // Header
      setText('patient_name', data.patient_name);
      setText('date_prepared_fmt', fmtDate(data.date_prepared));
      setText('currency', data.currency);
      setText('treatment_focus', data.treatment_focus);
      setText('hotel_nights_total', data.hotel_nights_total);
      setImgSrc('logo_src', data.media?.logo);
      setImgSrc('before_after_src', data.media?.beforeAfter);

      // Visits (Plan)
      const visitsGrid = document.getElementById('visits-grid');
      visitsGrid.innerHTML = '';
      (data.visits || []).forEach(v => {
        const box = document.createElement('div');
        box.style.cssText = 'border:1px solid #E5E7EB; border-radius:16px; padding:20px;';
        box.innerHTML = ''
          + '<h3 style="margin:0; font-weight:600;">' + v.title + '</h3>'
          + '<ul style="margin:8px 0 0; padding-left:20px; font-size:14px; color:#374151;">'
          + ( (v.bullets||[]).map(b=>'<li>'+ b +'</li>').join('') )
          + '<li>Hotel: <span style="font-weight:500;">' + v.hotel_nights + '</span> noches</li>'
          + '</ul>';
        visitsGrid.appendChild(box);
      });

      // Pricing rows
      const tbody = document.getElementById('pricing-rows');
      tbody.innerHTML = '';
      let total = 0;
      (data.visits || []).forEach(v => {
        total += (+v.amount || 0);
        const tr = document.createElement('tr');
        tr.innerHTML = ''
          + '<td style="padding:12px; border-bottom:1px solid #F3F4F6;">' + (v.item_label || '') + '</td>'
          + '<td style="padding:12px; border-bottom:1px solid #F3F4F6;">' + (v.item_desc || '') + '</td>'
          + '<td style="padding:12px; text-align:right; border-bottom:1px solid #F3F4F6; font-weight:500;">' + fmtMoney(v.amount) + '</td>';
        tbody.appendChild(tr);
      });
      document.getElementById('total-amount').textContent = fmtMoney(total);

      // Payments
      setText('deposit_fmt', data.deposit_amount ? fmtMoney(data.deposit_amount) : '—');
      setText('visit1_pay_fmt', data.visit1_pay_amount ? fmtMoney(data.visit1_pay_amount) : '—');
      setText('visit2_pay_fmt', data.visit2_pay_amount ? fmtMoney(data.visit2_pay_amount) : '—');

      // Validity
      setText('price_valid_until_fmt', fmtDate(data.price_valid_until));

      // Includes / Excludes
      const ulInc = document.getElementById('includes-list');
      if (ulInc) ulInc.innerHTML = (data.includes || []).map(i=>'<li>'+ i +'</li>').join('');
      const ulExc = document.getElementById('excludes-list');
      if (ulExc) ulExc.innerHTML = (data.excludes || []).map(e=>'<li>'+ e +'</li>').join('');

      // Gallery
      const gal = document.getElementById('gallery-grid');
      if (gal) gal.innerHTML = (data.media?.gallery || []).slice(0,3).map(src =>
        '<img src="'+src+'" alt="Medio" style="width:100%; height:12rem; object-fit:cover; border:1px solid #E5E7EB; border-radius:12px;">'
      ).join('');

      // Links
      const linksUl = document.getElementById('media-links');
      if (linksUl) linksUl.innerHTML = (data.media?.links || []).map(l =>
        '<li><a href="'+ l.href +'" target="_blank" rel="noopener" style="color:#111827; text-decoration:underline;">'+ l.label +'</a></li>'
      ).join('');

      // Embed
      const yt = document.getElementById('yt-embed');
      if (yt && data.media?.youtube_embed) yt.src = data.media.youtube_embed;
    })();
  </script>
</body>
</html>
